let t=document.getElementById("cakeWrap"),e=document.getElementById("blowBtn"),n=document.getElementById("makeAWish"),r=document.getElementById("relightAll"),l=document.getElementById("candles"),a=document.getElementById("confetti"),i=document.getElementById("candleCount"),c=document.getElementById("candleLabel"),o=document.getElementById("incCand"),s=document.getElementById("decCand"),u=Math.max(1,Math.min(12,Number(i.value||3))),d=[],m=[],f=(t,e)=>Math.random()*(e-t)+t;function y(t){l.innerHTML="",d=[];let e=Math.max(1,Math.min(12,t)),n=200/e;for(let t=0;t<e;t++){let e=160+n/2+t*n,r=function(t,e,n){let r="http://www.w3.org/2000/svg",l=document.createElementNS(r,"g");l.setAttribute("class","candle"),l.setAttribute("data-index",String(t)),l.setAttribute("transform",`translate(${e}, 90)`);let a=document.createElementNS(r,"rect");a.setAttribute("x","-6"),a.setAttribute("y","-62"),a.setAttribute("width","12"),a.setAttribute("height","50"),a.setAttribute("rx","3"),a.setAttribute("fill","#ff9aa8");let i=document.createElementNS(r,"path");i.setAttribute("d",t%2==0?"M-3 -68 q6 8 0 18":"M6 -68 q-6 8 0 18"),i.setAttribute("stroke",t%3==0?"#ff9aa8":t%3==1?"#8fcfff":"#ffd46b"),i.setAttribute("stroke-width","2"),i.setAttribute("fill","none");let c=document.createElementNS(r,"g");c.setAttribute("class","flameWrap"),c.setAttribute("transform","translate(0,-82)");let o=document.createElementNS(r,"ellipse");o.setAttribute("class","flameGlow"),o.setAttribute("cx","0"),o.setAttribute("cy","-2"),o.setAttribute("rx",String(10+t%2)),o.setAttribute("ry",String(14+t%2)),o.setAttribute("opacity","0.18"),o.setAttribute("fill","#fff2b8");let s=document.createElementNS(r,"path");return s.setAttribute("class","flame"),s.setAttribute("d","M0 0 C4 -8 4 -16 0 -22 C-4 -16 -4 -8 0 0 Z"),s.setAttribute("fill","#ffd06b"),c.appendChild(o),c.appendChild(s),l.appendChild(a),l.appendChild(i),l.appendChild(c),l.addEventListener("click",t=>{t.stopPropagation(),A(Number(l.getAttribute("data-index")))}),l}(t,e,0);l.appendChild(r),d.push(!0)}u=e,i.value=String(e),c.textContent=String(e),g(),b()}function b(){h(),Array.from(l.querySelectorAll(".candle")).forEach((t,e)=>{let n=t.querySelector(".flame"),r=t.querySelector(".flameGlow"),l=f(0,1e3);d[e]&&function t(){if(!d[e])return;let a=1+.03*Math.sin(.07*l+e)+.04*Math.random(),i=3*Math.sin(.03*l+e)+f(-1,1);n.style.transform=`scale(${a}) rotate(${i}deg)`,r.style.transform=`scale(${1+(a-1)*1.3})`,n.style.opacity=(.85+.15*Math.abs(Math.sin(.04*l))).toString(),l+=1,m[e]=requestAnimationFrame(t)}()})}function h(){m.forEach(t=>cancelAnimationFrame(t)),m=[],Array.from(l.querySelectorAll(".candle")).forEach(t=>{let e=t.querySelector(".flame"),n=t.querySelector(".flameGlow");e.style.transform="scale(0.25)",e.style.opacity="0",n.style.transform="scale(0.25)",n.style.opacity="0"})}function g(){let e=d.some(Boolean);t.classList.toggle("candle-on",e),t.classList.toggle("candle-out",!e)}function A(t,e){if(t<0||t>=d.length)return;d[t]="boolean"==typeof e?e:!d[t];let n=l.querySelector(`.candle[data-index="${t}"]`),r=n.querySelector(".flame"),i=n.querySelector(".flameGlow");if(d[t])r.style.opacity="1",i.style.opacity="0.18";else{r.style.opacity="0",i.style.opacity="0";let t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx","0"),t.setAttribute("cy",String(-94)),t.setAttribute("r","6"),t.setAttribute("fill","#e9f0ff"),t.style.transition="transform 700ms ease, opacity 700ms ease",a.appendChild(t),setTimeout(()=>{t.style.transform=`translate(${f(-30,30)}px, ${f(-120,-40)}px) scale(0.2)`,t.style.opacity="0"},20),setTimeout(()=>t.remove(),900)}g(),d.some(Boolean)?b():h()}function p(t=20){for(let e=0;e<t;e++){let t=Math.random()>.5?"rect":"circle",e=document.createElementNS("http://www.w3.org/2000/svg","rect"===t?"rect":"circle"),n=f(180,340),r=f(10,90);"rect"===t?(e.setAttribute("width","6"),e.setAttribute("height","10"),e.setAttribute("rx","1"),e.setAttribute("x",String(n)),e.setAttribute("y",String(r))):(e.setAttribute("r",String(f(2,5))),e.setAttribute("cx",String(n)),e.setAttribute("cy",String(r))),e.setAttribute("fill",`hsl(${f(10,320)}, ${f(70,90)}%, ${f(45,65)}%)`),e.setAttribute("class","conf"),e.style.opacity="1",a.appendChild(e),setTimeout(()=>{let t=f(-160,160),n=f(80,220);e.style.transform=`translate(${t}px, ${n}px) rotate(${f(-360,360)}deg) scale(${f(.4,1)})`,e.style.opacity="0"},f(20,220))}setTimeout(()=>a.innerHTML="",1200)}i.addEventListener("input",()=>{let t=Math.max(1,Math.min(12,Number(i.value)));c.textContent=String(t),y(t)}),o.addEventListener("click",()=>{y(Math.min(12,u+1))}),s.addEventListener("click",()=>{y(Math.max(1,u-1))}),e.addEventListener("click",function(){for(let t=0;t<d.length;t++)A(t,!1);p(18)}),r.addEventListener("click",function(){for(let t=0;t<d.length;t++)A(t,!0);b()}),n.addEventListener("click",()=>{d.some(Boolean)||A(Math.floor(d.length/2),!0),p(30)}),t.addEventListener("click",()=>{A(Math.floor(d.length/2))}),document.addEventListener("keydown",e=>{("Space"===e.code||" "===e.key)&&(document.activeElement===document.body||document.activeElement===t)&&(e.preventDefault(),A(Math.floor(d.length/2)))}),y(u);
//# sourceMappingURL=cake.86437801.js.map
