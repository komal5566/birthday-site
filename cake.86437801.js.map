{"mappings":"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","sources":["<anon>","src/cake.ts"],"sourcesContent":["var $6d1483cff68a82e1$exports = {};\n// cake.ts — dynamic candles (TypeScript). Save alongside cake.html and cake.css.\nconst $6d1483cff68a82e1$var$cakeWrap = document.getElementById('cakeWrap');\nconst $6d1483cff68a82e1$var$blowBtn = document.getElementById('blowBtn');\nconst $6d1483cff68a82e1$var$makeAWishBtn = document.getElementById('makeAWish');\nconst $6d1483cff68a82e1$var$relightAllBtn = document.getElementById('relightAll');\nconst $6d1483cff68a82e1$var$candlesContainer = document.getElementById('candles');\nconst $6d1483cff68a82e1$var$confettiGroup = document.getElementById('confetti');\nconst $6d1483cff68a82e1$var$range = document.getElementById('candleCount');\nconst $6d1483cff68a82e1$var$label = document.getElementById('candleLabel');\nconst $6d1483cff68a82e1$var$incBtn = document.getElementById('incCand');\nconst $6d1483cff68a82e1$var$decBtn = document.getElementById('decCand');\nlet $6d1483cff68a82e1$var$candleCount = Math.max(1, Math.min(12, Number($6d1483cff68a82e1$var$range.value || 3)));\nlet $6d1483cff68a82e1$var$candlesOn = [];\nlet $6d1483cff68a82e1$var$rafHandles = [];\nconst $6d1483cff68a82e1$var$rand = (min, max)=>Math.random() * (max - min) + min;\nfunction $6d1483cff68a82e1$var$createCandleSVG(index, x, yBase) {\n    // returns a <g> element representing one candle\n    const ns = 'http://www.w3.org/2000/svg';\n    const g = document.createElementNS(ns, 'g');\n    g.setAttribute('class', 'candle');\n    g.setAttribute('data-index', String(index));\n    g.setAttribute('transform', `translate(${x}, ${yBase})`);\n    // body\n    const rect = document.createElementNS(ns, 'rect');\n    rect.setAttribute('x', '-6');\n    rect.setAttribute('y', '-62');\n    rect.setAttribute('width', '12');\n    rect.setAttribute('height', '50');\n    rect.setAttribute('rx', '3');\n    rect.setAttribute('fill', '#ff9aa8');\n    // stripe (slightly varied)\n    const path = document.createElementNS(ns, 'path');\n    path.setAttribute('d', index % 2 === 0 ? 'M-3 -68 q6 8 0 18' : 'M6 -68 q-6 8 0 18');\n    path.setAttribute('stroke', index % 3 === 0 ? '#ff9aa8' : index % 3 === 1 ? '#8fcfff' : '#ffd46b');\n    path.setAttribute('stroke-width', '2');\n    path.setAttribute('fill', 'none');\n    // flame group\n    const fw = document.createElementNS(ns, 'g');\n    fw.setAttribute('class', 'flameWrap');\n    fw.setAttribute('transform', 'translate(0,-82)');\n    const glow = document.createElementNS(ns, 'ellipse');\n    glow.setAttribute('class', 'flameGlow');\n    glow.setAttribute('cx', '0');\n    glow.setAttribute('cy', '-2');\n    glow.setAttribute('rx', String(10 + index % 2));\n    glow.setAttribute('ry', String(14 + index % 2));\n    glow.setAttribute('opacity', '0.18');\n    glow.setAttribute('fill', '#fff2b8');\n    const flame = document.createElementNS(ns, 'path');\n    flame.setAttribute('class', 'flame');\n    flame.setAttribute('d', 'M0 0 C4 -8 4 -16 0 -22 C-4 -16 -4 -8 0 0 Z');\n    flame.setAttribute('fill', '#ffd06b');\n    fw.appendChild(glow);\n    fw.appendChild(flame);\n    g.appendChild(rect);\n    g.appendChild(path);\n    g.appendChild(fw);\n    // clicking the candle toggles it\n    g.addEventListener('click', (ev)=>{\n        ev.stopPropagation();\n        const idx = Number(g.getAttribute('data-index'));\n        $6d1483cff68a82e1$var$toggleCandle(idx);\n    });\n    return g;\n}\nfunction $6d1483cff68a82e1$var$renderCandles(count) {\n    // place candles evenly across the top cushion width (200 wide) centered at x=260\n    // top cushion center x = 260; width = 200; top y offset = 64 (as in SVG transforms above)\n    $6d1483cff68a82e1$var$candlesContainer.innerHTML = '';\n    $6d1483cff68a82e1$var$candlesOn = [];\n    const centerX = 260;\n    const width = 200;\n    const yBase = 90; // same reference used in SVG transforms in cake.html\n    // compute positions evenly\n    // If count = n, positions are spaced across width with margins: x = centerX - width/2 + step/2 + i*step\n    const n = Math.max(1, Math.min(12, count));\n    const step = width / n;\n    for(let i = 0; i < n; i++){\n        // position relative to SVG coordinate system\n        const x = centerX - width / 2 + step / 2 + i * step;\n        const g = $6d1483cff68a82e1$var$createCandleSVG(i, x, yBase);\n        $6d1483cff68a82e1$var$candlesContainer.appendChild(g);\n        $6d1483cff68a82e1$var$candlesOn.push(true);\n    }\n    $6d1483cff68a82e1$var$candleCount = n;\n    $6d1483cff68a82e1$var$range.value = String(n);\n    $6d1483cff68a82e1$var$label.textContent = String(n);\n    $6d1483cff68a82e1$var$refreshWrapClass();\n    $6d1483cff68a82e1$var$startFlickers();\n}\nfunction $6d1483cff68a82e1$var$startFlickers() {\n    $6d1483cff68a82e1$var$stopFlickers();\n    const candleGroups = Array.from($6d1483cff68a82e1$var$candlesContainer.querySelectorAll('.candle'));\n    candleGroups.forEach((el, idx)=>{\n        const flame = el.querySelector('.flame');\n        const glow = el.querySelector('.flameGlow');\n        let t = $6d1483cff68a82e1$var$rand(0, 1000);\n        function frame() {\n            if (!$6d1483cff68a82e1$var$candlesOn[idx]) return;\n            const s = 1 + Math.sin(t * 0.07 + idx) * 0.03 + Math.random() * 0.04;\n            const rot = Math.sin(t * 0.03 + idx) * 3 + $6d1483cff68a82e1$var$rand(-1, 1);\n            flame.style.transform = `scale(${s}) rotate(${rot}deg)`;\n            glow.style.transform = `scale(${1 + (s - 1) * 1.3})`;\n            flame.style.opacity = (0.85 + Math.abs(Math.sin(t * 0.04)) * 0.15).toString();\n            t += 1;\n            $6d1483cff68a82e1$var$rafHandles[idx] = requestAnimationFrame(frame);\n        }\n        if ($6d1483cff68a82e1$var$candlesOn[idx]) frame();\n    });\n}\nfunction $6d1483cff68a82e1$var$stopFlickers() {\n    $6d1483cff68a82e1$var$rafHandles.forEach((id)=>cancelAnimationFrame(id));\n    $6d1483cff68a82e1$var$rafHandles = [];\n    const candleGroups = Array.from($6d1483cff68a82e1$var$candlesContainer.querySelectorAll('.candle'));\n    candleGroups.forEach((el)=>{\n        const flame = el.querySelector('.flame');\n        const glow = el.querySelector('.flameGlow');\n        flame.style.transform = 'scale(0.25)';\n        flame.style.opacity = '0';\n        glow.style.transform = 'scale(0.25)';\n        glow.style.opacity = '0';\n    });\n}\nfunction $6d1483cff68a82e1$var$refreshWrapClass() {\n    const anyOn = $6d1483cff68a82e1$var$candlesOn.some(Boolean);\n    $6d1483cff68a82e1$var$cakeWrap.classList.toggle('candle-on', anyOn);\n    $6d1483cff68a82e1$var$cakeWrap.classList.toggle('candle-out', !anyOn);\n}\nfunction $6d1483cff68a82e1$var$toggleCandle(idx, setTo) {\n    if (idx < 0 || idx >= $6d1483cff68a82e1$var$candlesOn.length) return;\n    $6d1483cff68a82e1$var$candlesOn[idx] = typeof setTo === 'boolean' ? setTo : !$6d1483cff68a82e1$var$candlesOn[idx];\n    const group = $6d1483cff68a82e1$var$candlesContainer.querySelector(`.candle[data-index=\"${idx}\"]`);\n    const flame = group.querySelector('.flame');\n    const glow = group.querySelector('.flameGlow');\n    if ($6d1483cff68a82e1$var$candlesOn[idx]) {\n        flame.style.opacity = '1';\n        glow.style.opacity = '0.18';\n    } else {\n        flame.style.opacity = '0';\n        glow.style.opacity = '0';\n        // small puff\n        const ns = 'http://www.w3.org/2000/svg';\n        const puff = document.createElementNS(ns, 'circle');\n        puff.setAttribute('cx', '0');\n        puff.setAttribute('cy', String(-94));\n        puff.setAttribute('r', '6');\n        puff.setAttribute('fill', '#e9f0ff');\n        puff.style.transition = 'transform 700ms ease, opacity 700ms ease';\n        $6d1483cff68a82e1$var$confettiGroup.appendChild(puff);\n        setTimeout(()=>{\n            puff.style.transform = `translate(${$6d1483cff68a82e1$var$rand(-30, 30)}px, ${$6d1483cff68a82e1$var$rand(-120, -40)}px) scale(0.2)`;\n            puff.style.opacity = '0';\n        }, 20);\n        setTimeout(()=>puff.remove(), 900);\n    }\n    $6d1483cff68a82e1$var$refreshWrapClass();\n    if ($6d1483cff68a82e1$var$candlesOn.some(Boolean)) $6d1483cff68a82e1$var$startFlickers();\n    else $6d1483cff68a82e1$var$stopFlickers();\n}\nfunction $6d1483cff68a82e1$var$blowOutAll() {\n    for(let i = 0; i < $6d1483cff68a82e1$var$candlesOn.length; i++)$6d1483cff68a82e1$var$toggleCandle(i, false);\n    $6d1483cff68a82e1$var$spawnConfetti(18);\n}\nfunction $6d1483cff68a82e1$var$relightAll() {\n    for(let i = 0; i < $6d1483cff68a82e1$var$candlesOn.length; i++)$6d1483cff68a82e1$var$toggleCandle(i, true);\n    $6d1483cff68a82e1$var$startFlickers();\n}\nfunction $6d1483cff68a82e1$var$spawnConfetti(count = 20) {\n    for(let i = 0; i < count; i++){\n        const kind = Math.random() > 0.5 ? 'rect' : 'circle';\n        const ns = 'http://www.w3.org/2000/svg';\n        const el = document.createElementNS(ns, kind === 'rect' ? 'rect' : 'circle');\n        const x = $6d1483cff68a82e1$var$rand(180, 340);\n        const y = $6d1483cff68a82e1$var$rand(10, 90);\n        if (kind === 'rect') {\n            el.setAttribute('width', '6');\n            el.setAttribute('height', '10');\n            el.setAttribute('rx', '1');\n            el.setAttribute('x', String(x));\n            el.setAttribute('y', String(y));\n        } else {\n            el.setAttribute('r', String($6d1483cff68a82e1$var$rand(2, 5)));\n            el.setAttribute('cx', String(x));\n            el.setAttribute('cy', String(y));\n        }\n        el.setAttribute('fill', `hsl(${$6d1483cff68a82e1$var$rand(10, 320)}, ${$6d1483cff68a82e1$var$rand(70, 90)}%, ${$6d1483cff68a82e1$var$rand(45, 65)}%)`);\n        el.setAttribute('class', 'conf');\n        el.style.opacity = '1';\n        $6d1483cff68a82e1$var$confettiGroup.appendChild(el);\n        setTimeout(()=>{\n            const dx = $6d1483cff68a82e1$var$rand(-160, 160);\n            const dy = $6d1483cff68a82e1$var$rand(80, 220);\n            el.style.transform = `translate(${dx}px, ${dy}px) rotate(${$6d1483cff68a82e1$var$rand(-360, 360)}deg) scale(${$6d1483cff68a82e1$var$rand(0.4, 1)})`;\n            el.style.opacity = '0';\n        }, $6d1483cff68a82e1$var$rand(20, 220));\n    }\n    setTimeout(()=>$6d1483cff68a82e1$var$confettiGroup.innerHTML = '', 1200);\n}\n// UI wiring\n$6d1483cff68a82e1$var$range.addEventListener('input', ()=>{\n    const n = Math.max(1, Math.min(12, Number($6d1483cff68a82e1$var$range.value)));\n    $6d1483cff68a82e1$var$label.textContent = String(n);\n    $6d1483cff68a82e1$var$renderCandles(n);\n});\n$6d1483cff68a82e1$var$incBtn.addEventListener('click', ()=>{\n    const n = Math.min(12, $6d1483cff68a82e1$var$candleCount + 1);\n    $6d1483cff68a82e1$var$renderCandles(n);\n});\n$6d1483cff68a82e1$var$decBtn.addEventListener('click', ()=>{\n    const n = Math.max(1, $6d1483cff68a82e1$var$candleCount - 1);\n    $6d1483cff68a82e1$var$renderCandles(n);\n});\n$6d1483cff68a82e1$var$blowBtn.addEventListener('click', $6d1483cff68a82e1$var$blowOutAll);\n$6d1483cff68a82e1$var$relightAllBtn.addEventListener('click', $6d1483cff68a82e1$var$relightAll);\n$6d1483cff68a82e1$var$makeAWishBtn.addEventListener('click', ()=>{\n    if (!$6d1483cff68a82e1$var$candlesOn.some(Boolean)) {\n        // relight center candle\n        const mid = Math.floor($6d1483cff68a82e1$var$candlesOn.length / 2);\n        $6d1483cff68a82e1$var$toggleCandle(mid, true);\n    }\n    $6d1483cff68a82e1$var$spawnConfetti(30);\n});\n// clicking cake toggles middle candle\n$6d1483cff68a82e1$var$cakeWrap.addEventListener('click', ()=>{\n    const mid = Math.floor($6d1483cff68a82e1$var$candlesOn.length / 2);\n    $6d1483cff68a82e1$var$toggleCandle(mid);\n});\n// keyboard space toggles mid when focused\ndocument.addEventListener('keydown', (ev)=>{\n    if ((ev.code === 'Space' || ev.key === ' ') && (document.activeElement === document.body || document.activeElement === $6d1483cff68a82e1$var$cakeWrap)) {\n        ev.preventDefault();\n        const mid = Math.floor($6d1483cff68a82e1$var$candlesOn.length / 2);\n        $6d1483cff68a82e1$var$toggleCandle(mid);\n    }\n});\n// init\n$6d1483cff68a82e1$var$renderCandles($6d1483cff68a82e1$var$candleCount);\n\n\n//# sourceMappingURL=cake.86437801.js.map\n","// cake.ts — dynamic candles (TypeScript). Save alongside cake.html and cake.css.\r\n\r\nconst cakeWrap = document.getElementById('cakeWrap')!;\r\nconst blowBtn = document.getElementById('blowBtn') as HTMLButtonElement;\r\nconst makeAWishBtn = document.getElementById('makeAWish') as HTMLButtonElement;\r\nconst relightAllBtn = document.getElementById('relightAll') as HTMLButtonElement;\r\n\r\nconst candlesContainer = document.getElementById('candles')!;\r\nconst confettiGroup = document.getElementById('confetti')!;\r\nconst range = document.getElementById('candleCount') as HTMLInputElement;\r\nconst label = document.getElementById('candleLabel')!;\r\nconst incBtn = document.getElementById('incCand')!;\r\nconst decBtn = document.getElementById('decCand')!;\r\n\r\nlet candleCount = Math.max(1, Math.min(12, Number(range.value || 3)));\r\nlet candlesOn: boolean[] = [];\r\nlet rafHandles: number[] = [];\r\n\r\nconst rand = (min: number, max: number) => Math.random() * (max - min) + min;\r\n\r\n\r\nfunction createCandleSVG(index: number, x: number, yBase: number) {\r\n  // returns a <g> element representing one candle\r\n  const ns = 'http://www.w3.org/2000/svg';\r\n  const g = document.createElementNS(ns, 'g');\r\n  g.setAttribute('class', 'candle');\r\n  g.setAttribute('data-index', String(index));\r\n  g.setAttribute('transform', `translate(${x}, ${yBase})`);\r\n  // body\r\n  const rect = document.createElementNS(ns, 'rect');\r\n  \r\n  rect.setAttribute('x', '-6');\r\n  rect.setAttribute('y', '-62');\r\n  rect.setAttribute('width', '12');\r\n  rect.setAttribute('height', '50');\r\n  rect.setAttribute('rx', '3');\r\n  rect.setAttribute('fill', '#ff9aa8');\r\n  // stripe (slightly varied)\r\n  const path = document.createElementNS(ns, 'path');\r\n \r\n  path.setAttribute('d', index % 2 === 0 ? 'M-3 -68 q6 8 0 18' : 'M6 -68 q-6 8 0 18');\r\n  path.setAttribute('stroke', index % 3 === 0 ? '#ff9aa8' : (index % 3 === 1 ? '#8fcfff' : '#ffd46b'));\r\n  path.setAttribute('stroke-width', '2');\r\n  path.setAttribute('fill', 'none');\r\n\r\n  // flame group\r\n  const fw = document.createElementNS(ns, 'g');\r\n  fw.setAttribute('class', 'flameWrap');\r\n  fw.setAttribute('transform', 'translate(0,-82)');\r\n  const glow = document.createElementNS(ns, 'ellipse');\r\n  glow.setAttribute('class', 'flameGlow');\r\n  glow.setAttribute('cx', '0');\r\n  glow.setAttribute('cy', '-2');\r\n  glow.setAttribute('rx', String(10 + (index % 2)));\r\n  glow.setAttribute('ry', String(14 + (index % 2)));\r\n  glow.setAttribute('opacity', '0.18');\r\n  glow.setAttribute('fill', '#fff2b8');\r\n\r\n  const flame = document.createElementNS(ns, 'path');\r\n  flame.setAttribute('class', 'flame');\r\n  flame.setAttribute('d', 'M0 0 C4 -8 4 -16 0 -22 C-4 -16 -4 -8 0 0 Z');\r\n  flame.setAttribute('fill', '#ffd06b');\r\n\r\n  fw.appendChild(glow);\r\n  fw.appendChild(flame);\r\n\r\n  g.appendChild(rect);\r\n  g.appendChild(path);\r\n  g.appendChild(fw);\r\n\r\n  // clicking the candle toggles it\r\n  g.addEventListener('click', (ev) => {\r\n    ev.stopPropagation();\r\n    const idx = Number(g.getAttribute('data-index'));\r\n    toggleCandle(idx);\r\n  });\r\n\r\n  return g;\r\n}\r\n\r\nfunction renderCandles(count: number) {\r\n  // place candles evenly across the top cushion width (200 wide) centered at x=260\r\n  // top cushion center x = 260; width = 200; top y offset = 64 (as in SVG transforms above)\r\n  candlesContainer.innerHTML = '';\r\n  candlesOn = [];\r\n  const centerX = 260;\r\n  const width = 200;\r\n  const yBase = 90; // same reference used in SVG transforms in cake.html\r\n  // compute positions evenly\r\n  // If count = n, positions are spaced across width with margins: x = centerX - width/2 + step/2 + i*step\r\n  const n = Math.max(1, Math.min(12, count));\r\n  const step = width / n;\r\n  for (let i = 0; i < n; i++) {\r\n    // position relative to SVG coordinate system\r\n    const x = centerX - width / 2 + step / 2 + i * step;\r\n    const g = createCandleSVG(i, x, yBase);\r\n    candlesContainer.appendChild(g);\r\n    candlesOn.push(true);\r\n  }\r\n  candleCount = n;\r\n  (range as HTMLInputElement).value = String(n);\r\n  label.textContent = String(n);\r\n  refreshWrapClass();\r\n  startFlickers();\r\n}\r\n\r\nfunction startFlickers() {\r\n  stopFlickers();\r\n  const candleGroups = Array.from(candlesContainer.querySelectorAll<SVGGElement>('.candle'));\r\n  candleGroups.forEach((el, idx) => {\r\n    const flame = el.querySelector<SVGPathElement>('.flame')!;\r\n    const glow = el.querySelector<SVGElement>('.flameGlow')!;\r\n    let t = rand(0, 1000);\r\n    function frame() {\r\n      if (!candlesOn[idx]) return;\r\n      const s = 1 + Math.sin(t * 0.07 + idx) * 0.03 + (Math.random() * 0.04);\r\n      const rot = Math.sin(t * 0.03 + idx) * 3 + rand(-1, 1);\r\n      flame.style.transform = `scale(${s}) rotate(${rot}deg)`;\r\n      glow.style.transform = `scale(${1 + (s - 1) * 1.3})`;\r\n      (flame as any).style.opacity = (0.85 + Math.abs(Math.sin(t * 0.04)) * 0.15).toString();\r\n      t += 1;\r\n      rafHandles[idx] = requestAnimationFrame(frame);\r\n    }\r\n    if (candlesOn[idx]) frame();\r\n  });\r\n}\r\n\r\nfunction stopFlickers() {\r\n  rafHandles.forEach((id) => cancelAnimationFrame(id));\r\n  rafHandles = [];\r\n  const candleGroups = Array.from(candlesContainer.querySelectorAll<SVGGElement>('.candle'));\r\n  candleGroups.forEach((el) => {\r\n    const flame = el.querySelector<SVGPathElement>('.flame')!;\r\n    const glow = el.querySelector<SVGElement>('.flameGlow')!;\r\n    flame.style.transform = 'scale(0.25)';\r\n    flame.style.opacity = '0';\r\n    glow.style.transform = 'scale(0.25)';\r\n    glow.style.opacity = '0';\r\n  });\r\n}\r\n\r\nfunction refreshWrapClass() {\r\n  const anyOn = candlesOn.some(Boolean);\r\n  cakeWrap.classList.toggle('candle-on', anyOn);\r\n  cakeWrap.classList.toggle('candle-out', !anyOn);\r\n}\r\n\r\nfunction toggleCandle(idx: number, setTo?: boolean) {\r\n  if (idx < 0 || idx >= candlesOn.length) return;\r\n  candlesOn[idx] = typeof setTo === 'boolean' ? setTo : !candlesOn[idx];\r\n  const group = candlesContainer.querySelector<SVGGElement>(`.candle[data-index=\"${idx}\"]`)!;\r\n  const flame = group.querySelector<SVGPathElement>('.flame')!;\r\n  const glow = group.querySelector<SVGElement>('.flameGlow')!;\r\n  if (candlesOn[idx]) {\r\n    flame.style.opacity = '1';\r\n    glow.style.opacity = '0.18';\r\n  } else {\r\n    flame.style.opacity = '0';\r\n    glow.style.opacity = '0';\r\n    // small puff\r\n    const ns = 'http://www.w3.org/2000/svg';\r\n    const puff = document.createElementNS(ns, 'circle');\r\n    puff.setAttribute('cx', '0');\r\n    puff.setAttribute('cy', String(-94));\r\n    puff.setAttribute('r', '6');\r\n    puff.setAttribute('fill', '#e9f0ff');\r\n    puff.style.transition = 'transform 700ms ease, opacity 700ms ease';\r\n    confettiGroup.appendChild(puff);\r\n    setTimeout(() => {\r\n      puff.style.transform = `translate(${rand(-30,30)}px, ${rand(-120,-40)}px) scale(0.2)`;\r\n      puff.style.opacity = '0';\r\n    }, 20);\r\n    setTimeout(() => puff.remove(), 900);\r\n  }\r\n  refreshWrapClass();\r\n  if (candlesOn.some(Boolean)) startFlickers(); else stopFlickers();\r\n}\r\n\r\nfunction blowOutAll() {\r\n  for (let i = 0; i < candlesOn.length; i++) {\r\n    toggleCandle(i, false);\r\n  }\r\n  spawnConfetti(18);\r\n}\r\n\r\nfunction relightAll() {\r\n  for (let i = 0; i < candlesOn.length; i++) {\r\n    toggleCandle(i, true);\r\n  }\r\n  startFlickers();\r\n}\r\n\r\nfunction spawnConfetti(count = 20) {\r\n  for (let i = 0; i < count; i++) {\r\n    const kind = Math.random() > 0.5 ? 'rect' : 'circle';\r\n    const ns = 'http://www.w3.org/2000/svg';\r\n    const el = document.createElementNS(ns, kind === 'rect' ? 'rect' : 'circle');\r\n    const x = rand(180, 340);\r\n    const y = rand(10, 90);\r\n    if (kind === 'rect') {\r\n      (el as SVGRectElement).setAttribute('width', '6');\r\n      (el as SVGRectElement).setAttribute('height', '10');\r\n      (el as SVGRectElement).setAttribute('rx', '1');\r\n      el.setAttribute('x', String(x));\r\n      el.setAttribute('y', String(y));\r\n    } else {\r\n      el.setAttribute('r', String(rand(2,5)));\r\n      el.setAttribute('cx', String(x));\r\n      el.setAttribute('cy', String(y));\r\n    }\r\n    el.setAttribute('fill', `hsl(${rand(10,320)}, ${rand(70,90)}%, ${rand(45,65)}%)`);\r\n    el.setAttribute('class', 'conf');\r\n    el.style.opacity = '1';\r\n    confettiGroup.appendChild(el);\r\n\r\n    setTimeout(() => {\r\n      const dx = rand(-160, 160);\r\n      const dy = rand(80, 220);\r\n      el.style.transform = `translate(${dx}px, ${dy}px) rotate(${rand(-360,360)}deg) scale(${rand(0.4,1)})`;\r\n      el.style.opacity = '0';\r\n    }, rand(20, 220));\r\n  }\r\n  setTimeout(() => confettiGroup.innerHTML = '', 1200);\r\n}\r\n\r\n// UI wiring\r\nrange.addEventListener('input', () => {\r\n  const n = Math.max(1, Math.min(12, Number(range.value)));\r\n  label.textContent = String(n);\r\n  renderCandles(n);\r\n});\r\nincBtn.addEventListener('click', () => {\r\n  const n = Math.min(12, candleCount + 1);\r\n  renderCandles(n);\r\n});\r\ndecBtn.addEventListener('click', () => {\r\n  const n = Math.max(1, candleCount - 1);\r\n  renderCandles(n);\r\n});\r\n\r\nblowBtn.addEventListener('click', blowOutAll);\r\nrelightAllBtn.addEventListener('click', relightAll);\r\nmakeAWishBtn.addEventListener('click', () => {\r\n  if (!candlesOn.some(Boolean)) {\r\n    // relight center candle\r\n    const mid = Math.floor(candlesOn.length / 2);\r\n    toggleCandle(mid, true);\r\n  }\r\n  spawnConfetti(30);\r\n});\r\n\r\n// clicking cake toggles middle candle\r\ncakeWrap.addEventListener('click', () => {\r\n  const mid = Math.floor(candlesOn.length / 2);\r\n  toggleCandle(mid);\r\n});\r\n\r\n// keyboard space toggles mid when focused\r\ndocument.addEventListener('keydown', (ev) => {\r\n  if ((ev.code === 'Space' || ev.key === ' ') && (document.activeElement === document.body || document.activeElement === cakeWrap)) {\r\n    ev.preventDefault();\r\n    const mid = Math.floor(candlesOn.length / 2);\r\n    toggleCandle(mid);\r\n  }\r\n});\r\n\r\n// init\r\nrenderCandles(candleCount);\r\n"],"names":["$6d1483cff68a82e1$var$cakeWrap","document","getElementById","$6d1483cff68a82e1$var$blowBtn","$6d1483cff68a82e1$var$makeAWishBtn","$6d1483cff68a82e1$var$relightAllBtn","$6d1483cff68a82e1$var$candlesContainer","$6d1483cff68a82e1$var$confettiGroup","$6d1483cff68a82e1$var$range","$6d1483cff68a82e1$var$label","$6d1483cff68a82e1$var$incBtn","$6d1483cff68a82e1$var$decBtn","$6d1483cff68a82e1$var$candleCount","Math","max","min","Number","value","$6d1483cff68a82e1$var$candlesOn","$6d1483cff68a82e1$var$rafHandles","$6d1483cff68a82e1$var$rand","random","$6d1483cff68a82e1$var$renderCandles","count","innerHTML","n","step","width","i","x","centerX","g","$6d1483cff68a82e1$var$createCandleSVG","index","yBase","ns","createElementNS","setAttribute","String","rect","path","fw","glow","flame","appendChild","addEventListener","ev","stopPropagation","$6d1483cff68a82e1$var$toggleCandle","getAttribute","push","textContent","$6d1483cff68a82e1$var$refreshWrapClass","$6d1483cff68a82e1$var$startFlickers","$6d1483cff68a82e1$var$stopFlickers","candleGroups","Array","from","querySelectorAll","forEach","el","idx","querySelector","t","frame","s","sin","rot","style","transform","opacity","abs","toString","requestAnimationFrame","id","cancelAnimationFrame","anyOn","some","Boolean","classList","toggle","setTo","length","group","puff","transition","setTimeout","remove","$6d1483cff68a82e1$var$spawnConfetti","kind","y","dx","dy","floor","code","key","activeElement","body","preventDefault"],"version":3,"file":"cake.86437801.js.map"}